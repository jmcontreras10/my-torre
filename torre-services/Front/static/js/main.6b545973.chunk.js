(this["webpackJsonptorre-react-webapp"]=this["webpackJsonptorre-react-webapp"]||[]).push([[0],{16:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(1),s=r.n(n),c=r(8),o=r.n(c),i=r(2),u=r.n(i),l=r(4),p=r(5),b={"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},d=function(){var e=Object(l.a)(u.a.mark((function e(){var t,r,a,n,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{path:"/",method:"GET",body:void 0,headers:b,redirect:"follow"},r="".concat("api").concat(t.path),t.body&&(t.body=JSON.stringify(t.body)),e.next=5,fetch(r,t);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(n.createContext)(),j=Object(n.createContext)(),m=function(){return Object(n.useContext)(j)},x=function(e){var t=e.children,r=Object(n.useState)({}),s=Object(p.a)(r,2),c=s[0],o=s[1],i=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var a,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={path:"/auth/login",method:"POST",body:{username:t,password:r},headers:{"Content-Type":"application/json"}},e.next=4,d(a);case 4:if(1400!==(null===(n=e.sent)||void 0===n?void 0:n.internalCode)){e.next=7;break}throw n;case 7:return s={username:n.user.username},sessionStorage.setItem("JWTtorreJobsToken",n.token),sessionStorage.setItem("torreSocialUsername",n.user.username),o(s),e.abrupt("return",!0);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var a,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={path:"/auth",method:"POST",body:{username:t,password:r},headers:{"Content-Type":"application/json"}},e.next=4,d(a);case 4:if(1201===(null===(n=e.sent)||void 0===n?void 0:n.internalCode)){e.next=7;break}throw n;case 7:return s={username:n.data.username},sessionStorage.setItem("JWTtorreJobsToken",n.data.token),sessionStorage.setItem("torreSocialUsername",t),o(s),e.abrupt("return",!0);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={path:"/auth/logout",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.getItem("JWTtorreJobsToken"))}},e.next=4,d(t);case 4:sessionStorage.removeItem("JWTtorreJobsToken"),sessionStorage.removeItem("torreSocialUsername"),o({}),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(h.Provider,{value:{userData:c},children:Object(a.jsx)(j.Provider,{value:{register:b,login:i,logout:m},children:t})})},f=Object(n.createContext)(),g=Object(n.createContext)(),O=function(){return Object(n.useContext)(f)},v=function(){return Object(n.useContext)(g)},w=function(e){var t=e.children,r=Object(n.useState)(0),s=Object(p.a)(r,2),c=s[0],o=s[1],i=Object(n.useState)(!1),u=Object(p.a)(i,2),l=u[0],b=u[1];return Object(n.useEffect)((function(){o(sessionStorage.getItem("JWTtorreJobsToken")?1:0)}),[]),Object(a.jsx)(f.Provider,{value:{screen:c,setScreen:o},children:Object(a.jsx)(g.Provider,{value:{globalLoading:l,setGlobalLoading:b},children:t})})},y=Object(n.createContext)(),S=function(){return Object(n.useContext)(y)},k=function(e){var t=e.children,r=Object(n.useState)([]),s=Object(p.a)(r,2),c=s[0],o=s[1];Object(n.useEffect)((function(){var e=sessionStorage.getItem("JWTtorreJobsToken"),t=sessionStorage.getItem("torreSocialUsername");if(t){var r={path:"/social/close/".concat(t),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}};d(r).then((function(e){o(e.data)})).catch((function(e){console.log(e)}))}}),[]);var i=function(){var e=Object(l.a)(u.a.mark((function e(){var t,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=sessionStorage.getItem("JWTtorreJobsToken"),(r=sessionStorage.getItem("torreSocialUsername"))&&(a={path:"/social/close/".concat(r),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}},d(a).then((function(e){console.log(JSON.stringify(e.data)),o(e.data)})).catch((function(e){console.log(e)})))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(y.Provider,{value:{closePeople:c,loadClosePeople:i},children:t})},T=r(3),N=r(9),C=r.n(N),I=function(e){return Object(a.jsx)("button",{type:"button",className:"bg-rose-600 m-auto mb-6 bg-",disabled:!0,children:Object(a.jsx)("div",{className:"animate-spin h-10 w-10 mr-3 ".concat(C.a.anim," m-auto"),viewBox:"0 0 24 24"})})},_=r(6),G=r.n(_),E={authState:0,buttonText:"Continue",authMessage:"Do you have a Torre account?",inputErrorsMessage:void 0,error:!1,loading:!1,userInfo:void 0,correctMatch:!0},R=function(e,t){switch(t.type){case"GO_BEGINING":return E;case"GO_LOGIN":return Object(T.a)(Object(T.a)({},e),{},{authState:1,authMessage:"Cool, login to start",buttonText:"Login",loading:!1,correctMatch:!0});case"GO_REGISTER":return Object(T.a)(Object(T.a)({},e),{},{authState:2,authMessage:"You don't have an account yet, please register",buttonText:"Register",loading:!1,correctMatch:!1});case"GO_TORRE":return Object(T.a)(Object(T.a)({},e),{},{authState:3,authMessage:"You don't have a Torre account yet, please register in the link below",error:!0,loading:!1});case"GO_ERROR":return Object(T.a)(Object(T.a)({},e),{},{authMessage:t.message,error:!0,loading:!1});case"LOADING":return Object(T.a)(Object(T.a)({},e),{},{loading:!0});case"VERIFY":return Object(T.a)(Object(T.a)({},e),{},{inputErrorsMessage:t.message,correctMatch:t.value});default:throw new Error}},J=function(){var e=Object(n.useState)({username:"",password:""}),t=Object(p.a)(e,2),r=t[0],s=t[1],c=m(),o=c.login,i=c.register,b=O().setScreen,h=v().setGlobalLoading,j=S().loadClosePeople,x=Object(n.useReducer)(R,E),f=Object(p.a)(x,2),g=f[0],w=f[1],y=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w({type:"LOADING"}),e.next=4,d({path:"/auth/val/".concat(r.username)});case 4:200===(t=e.sent).code?w({type:"GO_LOGIN"}):1001===t.code?w({type:"GO_REGISTER"}):1e3===t.code&&w({type:"GO_TORRE"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w({type:"GO_ERROR",message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,o(r.username,r.password);case 4:return e.next=6,j();case 6:b(sessionStorage.getItem("JWTtorreJobsToken")?1:0),h(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),h(!1),w({type:"GO_ERROR",message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,i(r.username,r.password);case 4:return e.next=6,j();case 6:b(sessionStorage.getItem("JWTtorreJobsToken")?1:0),h(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),h(!1),w({type:"GO_ERROR",message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),e.t0=g.authState,e.next=0===e.t0?4:1===e.t0?7:2===e.t0?10:13;break;case 4:return e.next=6,y();case 6:return e.abrupt("break",14);case 7:return e.next=9,k();case 9:return e.abrupt("break",14);case 10:return e.next=12,N();case 12:return e.abrupt("break",14);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"bg-secondary p-12 color-white ".concat(G.a.AuthCard),children:Object(a.jsxs)("div",{className:"w-auto flex justify-center flex-col text-center",children:[g.authState>0&&Object(a.jsx)("span",{className:"w-full flex justify-start mb-10",children:Object(a.jsx)("button",{className:"underline",onClick:function(e){e.preventDefault(),w({type:"GO_BEGINING"})},children:"Back"})}),Object(a.jsx)("img",{src:"https://torre-media.s3-us-west-2.amazonaws.com/organizations/Torre+(generic)+-+Dark+icon+-+Lime+(x2).png",className:"object-contain h-28 w-full mb-5",alt:"Torre co"}),Object(a.jsx)("h1",{className:"text-2xl mb-5",children:"Torre Jobs"}),Object(a.jsxs)("div",{className:"flex flex-col",children:[Object(a.jsx)("p",{className:"mb-3 ".concat(g.error&&"text-red-500"),children:g.authMessage}),Object(a.jsx)("p",{className:"mb-3 text-red-500",children:g.inputErrorsMessage&&g.inputErrorsMessage}),Object(a.jsx)("input",{type:"text",placeholder:"username",autoComplete:"off",className:G.a.basicInput,onChange:function(e){s(Object(T.a)(Object(T.a)({},r),{},{username:e.target.value}))},disabled:3===g.authState}),(1===g.authState||2===g.authState)&&Object(a.jsx)("input",{type:"password",placeholder:"password",autoComplete:"off",className:G.a.basicInput,onChange:function(e){s(Object(T.a)(Object(T.a)({},r),{},{password:e.target.value})),r.password.length<7?w({type:"VERIFY",value:!1,message:"Password must be longer than 7"}):w({type:"VERIFY",value:!0,message:void 0})},required:!0}),2===g.authState&&Object(a.jsx)("input",{type:"password",placeholder:"repeat password",autoComplete:"off",className:G.a.basicInput,onChange:function(e){e.target.value!==r.password?w({type:"VERIFY",value:!1,message:"Passwords not match"}):w({type:"VERIFY",value:!0,message:void 0})},required:!0}),g.loading?Object(a.jsx)(I,{}):Object(a.jsx)("button",{className:G.a.continueButton,onClick:C,disabled:3===g.authState||!g.correctMatch,children:g.buttonText}),Object(a.jsx)("a",{href:"https://www.torre.co/",target:"_blank",className:"mt-5 underline ",rel:"noreferrer",children:"Create one"})]})]})})})},M=function(){return Object(a.jsx)("main",{className:"flex h-screen w-screen bg-onTerceary font-sans text-white",children:Object(a.jsx)("div",{className:"m-auto",children:Object(a.jsx)(J,{})})})},P=function(){var e=O().setScreen,t=m().logout,r=v().setGlobalLoading,n=function(){var a=Object(l.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r(!0),a.next=4,t();case 4:e(0),r(!1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return Object(a.jsx)("nav",{className:"fixed z-20 w-full",children:Object(a.jsxs)("div",{className:"w-full bg-secondary flex flex-row justify-between items-center shadow-2xl",children:[Object(a.jsx)("h1",{className:"text-4xl text-white",children:Object(a.jsx)("img",{className:"p-2",src:"https://res.cloudinary.com/torre-technologies-co/image/upload/v1601512321/origin/bio/organizations/Torre_logo_small_uubm3e.png",alt:"Torre logo"})}),Object(a.jsx)("h1",{className:"text-5xl mb-3",children:"Your Network"}),Object(a.jsx)("button",{className:"text-onPrimary justify-self-end bg-primary ml-3 p-2 rounded-lg mx-5 px-5",onClick:n,children:"Logout"})]})})},L=function(e){return Object(a.jsx)("div",{className:"bg-gray-800 p-5 color-white my-4 rounded-2xl h-full w-auto hover:bg-gray-700 hover:shadow-lg transition transform hover:-translate-y-1 hover:scale-110",children:Object(a.jsxs)("div",{className:"flex flex-col text-center content-center",children:[Object(a.jsxs)("svg",{className:"p-1 stroke-current stroke-2 text-primary",viewBox:"0 0 100 100",children:[Object(a.jsx)("defs",{children:Object(a.jsx)("pattern",{id:e.username,patternUnits:"userSpaceOnUse",width:"100",height:"100",children:Object(a.jsx)("image",{href:e.picture,alt:e.name,x:"-25",width:"150",height:"100"})})}),Object(a.jsx)("polygon",{points:"50 1 95 25 95 75 50 99 5 75 5 25",fill:"url(#".concat(e.username,")")})]}),Object(a.jsx)("p",{children:e.name}),Object(a.jsx)("a",{className:"text-primary",href:"https://bio.torre.co/"+e.username,target:"_blank",rel:"noopener noreferrer",children:" @"+e.username})]})})},A=function(){var e=S().closePeople;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("main",{className:"flex w-full bg-onTerceary font-sans text-white",children:[Object(a.jsx)(P,{}),Object(a.jsx)("div",{className:"mt-28 mb-40 flex flex-col md:px-auto mx-auto",children:Object(a.jsx)("div",{className:"flex-col wra w-full grid grid-cols-1 gap-4 md:grid-cols-3 lg:grid-cols-6",children:null===e||void 0===e?void 0:e.map((function(e,t){return Object(a.jsx)(L,{username:e.username,name:e.name,picture:e.picture},t)}))})})]}),Object(a.jsxs)("footer",{className:"text-center bg-secondary fixed bottom-0 z-20 w-full py-8 px-5 text-white",children:["Made by"," ",Object(a.jsx)("a",{className:"text-primary",href:"https://bio.torre.co/jmcontreras10",target:"_blank",rel:"noopener noreferrer",children:"@jmcontreras10"}),".  ","visit me at:"," ",Object(a.jsx)("a",{className:"text-primary",href:"https://mateocontreras.co/",target:"_blank",rel:"noopener noreferrer",children:"My Website"})]})]})};var B=function(){var e=O().screen,t=v().globalLoading;return Object(a.jsxs)("div",{className:"App",children:[t&&Object(a.jsx)("div",{className:"absolute top-0 left-0 flex h-screen w-screen bg-opacity-50 bg-white",children:Object(a.jsx)("div",{className:"m-auto",children:Object(a.jsx)(I,{})})}),function(){switch(e){case 0:return Object(a.jsx)(M,{});case 1:return Object(a.jsx)(A,{});default:return null}}()]})},W=(r(16),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,18)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))});o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(x,{children:Object(a.jsx)(w,{children:Object(a.jsx)(k,{children:Object(a.jsx)(B,{})})})})}),document.getElementById("root")),W()},6:function(e,t,r){e.exports={basicInput:"AuthCard_basicInput__10Skg",continueButton:"AuthCard_continueButton__2_MSk",AuthCard:"AuthCard_AuthCard__28Wxn"}},9:function(e,t,r){e.exports={anim:"LoadingIndicator_anim__2Gls7",animatespin:"LoadingIndicator_animatespin__17fDH"}}},[[17,1,2]]]);
//# sourceMappingURL=main.6b545973.chunk.js.map